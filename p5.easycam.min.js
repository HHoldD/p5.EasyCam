var Dw={};(function(c){const e={LIBRARY:"p5.EasyCam",VERSION:"1.0.7",AUTHOR:"Thomas Diewald",SOURCE:"https://github.com/diwi/p5.EasyCam",toString:function(){return this.LIBRARY+" v"+this.VERSION+" by "+this.AUTHOR+" ("+this.SOURCE+")"}};var f=class{constructor(o,p){if(!(o instanceof p5.RendererGL))return void console.log("renderer needs to be an instance of p5.RendererGL");p=p||{},p.distance===void 0&&(p.distance=500),p.center===void 0&&(p.center=[0,0,0]),p.rotation===void 0&&(p.rotation=k.identity()),p.viewport===void 0&&(p.viewport=[0,0,o.width,o.height]),this.INFO=e,this.setCanvas(o);var q=this;this.cam=q,this.LOOK=[0,0,1],this.UP=[0,1,0],this.AXIS=new function(){this.YAW=1,this.PITCH=2,this.ROLL=4,this.ALL=this.YAW|this.PITCH|this.ROLL},this.SHIFT_CONSTRAINT=0,this.FIXED_CONSTRAINT=0,this.DRAG_CONSTRAINT=0,this.scale_rotation=1e-3,this.scale_pan=2e-4,this.scale_zoom=1e-3,this.scale_zoomwheel=20,this.default_interpolation_time=300,this.distance_min_limit=0.01,this.distance_min=1,this.distance_max=Number.MAX_VALUE,this.state={distance:p.distance,center:p.center.slice(),rotation:p.rotation.slice(),copy:function(r){return r=r||{},r.distance=this.distance,r.center=this.center.slice(),r.rotation=this.rotation.slice(),r}},this.state_reset=this.state.copy(),this.state_pushed=this.state.copy(),this.viewport=p.viewport.slice(),this.mouse={cam:q,curr:[0,0,0],prev:[0,0,0],dist:[0,0,0],mwheel:0,isPressed:!1,istouchdown:!1,ismousedown:!1,BUTTON:{LMB:1,MMB:2,RMB:4},button:0,mouseDragLeft:q.mouseDragRotate.bind(q),mouseDragCenter:q.mouseDragPan.bind(q),mouseDragRight:q.mouseDragZoom.bind(q),mouseWheelAction:q.mouseWheelZoom.bind(q),touchmoveSingle:q.mouseDragRotate.bind(q),touchmoveMulti:function(){q.mouseDragPan(),q.mouseDragZoom()},insideViewport:function(r,u){var v=q.viewport[0],A=v+q.viewport[2],B=q.viewport[1],C=B+q.viewport[3];return r>v&&r<A&&u>B&&u<C},solveConstraint:function(){var r=this.dist[0],u=this.dist[1];this.shiftKey&&!q.SHIFT_CONSTRAINT&&1<Math.abs(r-u)&&(q.SHIFT_CONSTRAINT=Math.abs(r)>Math.abs(u)?q.AXIS.YAW:q.AXIS.PITCH),q.DRAG_CONSTRAINT=q.AXIS.ALL,q.FIXED_CONSTRAINT&&(q.DRAG_CONSTRAINT=q.FIXED_CONSTRAINT),q.SHIFT_CONSTRAINT&&(q.DRAG_CONSTRAINT=q.SHIFT_CONSTRAINT)},updateInput:function(r,u,v){var A=q.mouse,B=q.P5.pixelDensity();A.prev[0]=A.curr[0],A.prev[1]=A.curr[1],A.prev[2]=A.curr[2],A.curr[0]=r,A.curr[1]=u,A.curr[2]=v,A.dist[0]=-(A.curr[0]-A.prev[0])/B,A.dist[1]=-(A.curr[1]-A.prev[1])/B,A.dist[2]=-(A.curr[2]-A.prev[2])/B},mousedown:function(r){var u=q.mouse;0===r.button&&(u.button|=u.BUTTON.LMB),1===r.button&&(u.button|=u.BUTTON.MMB),2===r.button&&(u.button|=u.BUTTON.RMB),u.insideViewport(r.x,r.y)&&(u.updateInput(r.x,r.y,r.y),u.ismousedown=0<u.button,u.isPressed=u.ismousedown,q.SHIFT_CONSTRAINT=0)},mousedrag:function(){var r=q.P5.pixelDensity(),u=q.mouse;if(u.ismousedown){var v=q.P5.mouseX,A=q.P5.mouseY;u.updateInput(v,A,A),u.solveConstraint();var C=u.button&u.BUTTON.LMB,D=u.button&u.BUTTON.MMB,E=u.button&u.BUTTON.RMB;C&&u.mouseDragLeft&&u.mouseDragLeft(),D&&u.mouseDragCenter&&u.mouseDragCenter(),E&&u.mouseDragRight&&u.mouseDragRight()}},mouseup:function(r){var u=q.mouse;0===r.button&&(u.button&=~u.BUTTON.LMB),1===r.button&&(u.button&=~u.BUTTON.MMB),2===r.button&&(u.button&=~u.BUTTON.RMB),u.ismousedown=0<u.button,u.isPressed=u.istouchdown||u.ismousedown,q.SHIFT_CONSTRAINT=0},dblclick:function(r){var u=r.x,v=r.y;q.mouse.insideViewport(u,v)&&q.reset()},wheel:function(r){var u=r.x,v=r.y,A=q.mouse;A.insideViewport(u,v)&&(A.mwheel=0.01*r.deltaY,A.mouseWheelAction&&A.mouseWheelAction())},evaluateTouches:function(r){var u=r.touches,v=0,A=0,B=0,C,D,E,F=u.length;for(C=0;C<F;C++)v+=u[C].clientX,A+=u[C].clientY;for(v/=F,A/=F,C=0;C<F;C++)D=v-u[C].clientX,E=A-u[C].clientY,B+=Math.sqrt(D*D+E*E);B/=F,q.mouse.updateInput(v,A,-B)},touchstart:function(r){r.preventDefault(),r.stopPropagation();var u=q.mouse;u.evaluateTouches(r),u.istouchdown=u.insideViewport(u.curr[0],u.curr[1]),u.isPressed=q.mouse.istouchdown||q.mouse.ismousedown,u.dbltap(r)},touchmove:function(r){r.preventDefault(),r.stopPropagation();var u=q.mouse;u.istouchdown&&(u.evaluateTouches(r),u.solveConstraint(),1===r.touches.length?u.touchmoveSingle():(u.touchmoveMulti(),u.tapcount=0))},touchend:function(r){r.preventDefault(),r.stopPropagation();var u=q.mouse;u.istouchdown=!1,u.isPressed=u.istouchdown||u.ismousedown,q.SHIFT_CONSTRAINT=0,2<=u.tapcount&&(u.insideViewport(u.curr[0],u.curr[1])&&q.reset(),u.tapcount=0)},tapcount:0,dbltap:function(){0==q.mouse.tapcount++&&setTimeout(function(){q.mouse.tapcount=0},350)},shiftKey:!1,keydown:function(r){var u=q.mouse;u.shiftKey||(u.shiftKey=16===r.keyCode)},keyup:function(r){var u=q.mouse;u.shiftKey&&(u.shiftKey=16!==r.keyCode,!u.shiftKey&&(q.SHIFT_CONSTRAINT=0))}},this.attachMouseListeners(),this.auto_update=!0,this.P5.registerMethod("pre",function(){q.auto_update&&q.update()}),this.dampedZoom=new g(this,function(r){q.zoom(r*q.getZoomMult())}),this.dampedPanX=new g(this,function(r){q.panX(r*q.getPanMult())}),this.dampedPanY=new g(this,function(r){q.panY(r*q.getPanMult())}),this.dampedRotX=new g(this,function(r){q.rotateX(r*q.getRotationMult())}),this.dampedRotY=new g(this,function(r){q.rotateY(r*q.getRotationMult())}),this.dampedRotZ=new g(this,function(r){q.rotateZ(r*q.getRotationMult())}),this.timedRot=new j(this,this.setInterpolatedRotation),this.timedPan=new j(this,this.setInterpolatedCenter),this.timedzoom=new j(this,this.setInterpolatedDistance)}setCanvas(o){o instanceof p5.RendererGL?(this.renderer=o,this.graphics=o._pInst instanceof p5?o:o._pInst,this.P5=this.graphics._pInst):(this.graphics=void 0,this.renderer=void 0)}getCanvas(){return this.renderer}attachListener(o,p,q,r){o&&o!==q.el&&(this.detachListener(q),q.el=o,q.ev=p,q.op=r,q.el.addEventListener(q.ev,q,q.op))}detachListener(o){o.el&&(o.el.removeEventListener(o.ev,o,o.op),o.el=void 0)}attachMouseListeners(o){var p=this.cam,q=p.mouse;if(o=o||p.renderer,o){var r={passive:!1},u=o.elt;p.attachListener(u,"mousedown",q.mousedown,r),p.attachListener(u,"mouseup",q.mouseup,r),p.attachListener(u,"dblclick",q.dblclick,r),p.attachListener(u,"wheel",q.wheel,r),p.attachListener(u,"touchstart",q.touchstart,r),p.attachListener(u,"touchend",q.touchend,r),p.attachListener(u,"touchmove",q.touchmove,r),p.attachListener(window,"keydown",q.keydown,r),p.attachListener(window,"keyup",q.keyup,r)}}removeMouseListeners(){var o=this.cam,p=o.mouse;o.detachListener(p.mousedown),o.detachListener(p.mouseup),o.detachListener(p.dblclick),o.detachListener(p.wheel),o.detachListener(p.keydown),o.detachListener(p.keyup),o.detachListener(p.touchstart),o.detachListener(p.touchend),o.detachListener(p.touchmove)}dispose(){removeMouseListeners()}getAutoUpdate(){return this.auto_update}setAutoUpdate(o){this.auto_update=o}setViewport(o){this.viewport=o.slice()}getViewport(){return this.viewport}update(){var o=this.cam,p=o.mouse;p.mousedrag();var q=!1;q|=o.dampedZoom.update(),q|=o.dampedPanX.update(),q|=o.dampedPanY.update(),q|=o.dampedRotX.update(),q|=o.dampedRotY.update(),q|=o.dampedRotZ.update(),q?(o.timedRot.stop(),o.timedPan.stop(),o.timedzoom.stop()):(o.timedRot.update(),o.timedPan.update(),o.timedzoom.update()),o.apply()}apply(o){var p=this.cam;o=o||p.renderer,o&&(this.camEYE=this.getPosition(this.camEYE),this.camLAT=this.getCenter(this.camLAT),this.camRUP=this.getUpVector(this.camRUP),o.camera(this.camEYE[0],this.camEYE[1],this.camEYE[2],this.camLAT[0],this.camLAT[1],this.camLAT[2],this.camRUP[0],this.camRUP[1],this.camRUP[2]))}mouseWheelZoom(){var o=this,p=o.mouse;o.dampedZoom.addForce(p.mwheel*o.scale_zoomwheel)}mouseDragZoom(){var o=this,p=o.mouse;o.dampedZoom.addForce(-p.dist[2])}mouseDragPan(){var o=this,p=o.mouse;o.dampedPanX.addForce(o.DRAG_CONSTRAINT&o.AXIS.YAW?p.dist[0]:0),o.dampedPanY.addForce(o.DRAG_CONSTRAINT&o.AXIS.PITCH?p.dist[1]:0)}mouseDragRotate(){var o=this,p=o.mouse,q=p.curr[0],r=p.curr[1],u=p.dist[0],v=p.dist[1],A=2*Math.min(Math.max((q-o.viewport[0])/o.viewport[2],0),1)-1,B=2*Math.min(Math.max((r-o.viewport[1])/o.viewport[3],0),1)-1;o.DRAG_CONSTRAINT&o.AXIS.YAW&&o.dampedRotY.addForce(+u*(1-B*B)),o.DRAG_CONSTRAINT&o.AXIS.PITCH&&o.dampedRotX.addForce(-v*(1-A*A)),o.DRAG_CONSTRAINT&o.AXIS.ROLL&&(o.dampedRotZ.addForce(-u*B),o.dampedRotZ.addForce(+v*A))}getZoomMult(){return this.state.distance*this.scale_zoom}getPanMult(){return this.state.distance*this.scale_pan}getRotationMult(){return Math.pow(Math.log10(1+this.state.distance),0.5)*this.scale_rotation}zoom(o){var p=this.cam,q=p.state.distance+o;q<p.distance_min&&(q=p.distance_min,p.dampedZoom.stop()),q>p.distance_max&&(q=p.distance_max,p.dampedZoom.stop()),p.state.distance=q}panX(o){var p=this.cam.state;if(o){var q=k.applyToVec3(p.rotation,[o,0,0]);m.add(p.center,q,p.center)}}panY(o){var p=this.cam.state;if(o){var q=k.applyToVec3(p.rotation,[0,o,0]);m.add(p.center,q,p.center)}}pan(o){this.cam.panX(o),this.cam.panY(o)}rotateX(o){this.cam.rotate([1,0,0],o)}rotateY(o){this.cam.rotate([0,1,0],o)}rotateZ(o){this.cam.rotate([0,0,1],o)}rotate(o,p){var q=this.cam.state;if(p){var r=k.create({axis:o,angle:p});k.applyToRotation(q.rotation,r,q.rotation)}}setInterpolatedDistance(o,p,q){this.cam.state.distance=l.mix(o,p,l.smoothstep(q))}setInterpolatedCenter(o,p,q){this.cam.state.center=m.mix(o,p,l.smoothstep(q))}setInterpolatedRotation(o,p,q){this.cam.state.rotation=k.slerp(o,p,q)}setDistanceMin(o){this.distance_min=Math.max(o,this.distance_min_limit),this.zoom(0)}setDistanceMax(o){this.distance_max=o,this.zoom(0)}setDistance(o,p){this.timedzoom.start(this.state.distance,o,p,[this.dampedZoom])}getDistance(){return this.state.distance}setCenter(o,p){this.timedPan.start(this.state.center,o,p,[this.dampedPanX,this.dampedPanY])}getCenter(){return this.state.center}setRotation(o,p){this.timedRot.start(this.state.rotation,o,p,[this.dampedRotX,this.dampedRotY,this.dampedRotZ])}getRotation(){return this.state.rotation}getPosition(o){var p=this.cam,q=p.state;return o=m.assert(o),k.applyToVec3(q.rotation,p.LOOK,o),m.mult(o,q.distance,o),m.add(o,q.center,o),o}getUpVector(o){var p=this.cam,q=p.state;return o=m.assert(o),k.applyToVec3(q.rotation,p.UP,o),o}getState(){return this.state.copy()}setState(o,p){o&&(this.setDistance(o.distance,p),this.setCenter(o.center,p),this.setRotation(o.rotation,p))}pushState(){return this.state_pushed=this.getState()}popState(o){this.setState(this.state_pushed,o)}pushResetState(){return this.state_reset=this.getState()}reset(o){this.setState(this.state_reset,o)}setRotationScale(o){this.scale_rotation=o}setPanScale(o){this.scale_pan=o}setZoomScale(o){this.scale_zoom=o}getRotationScale(){return this.scale_rotation}getPanScale(){return this.scale_pan}getZoomScale(){return this.scale_zoom}getWheelScale(){return this.scale_zoomwheel}setWheelScale(o){this.scale_zoomwheel=o}setDamping(o){this.dampedZoom.damping=o,this.dampedPanX.damping=o,this.dampedPanY.damping=o,this.dampedRotX.damping=o,this.dampedRotY.damping=o,this.dampedRotZ.damping=o}setDefaultInterpolationTime(o){this.default_interpolation_time=o}getDefaultInterpolationTime(){return this.default_interpolation_time}setRotationConstraint(o,p,q){var r=this.cam;r.FIXED_CONSTRAINT=0,r.FIXED_CONSTRAINT|=o?r.AXIS.YAW:0,r.FIXED_CONSTRAINT|=p?r.AXIS.PITCH:0,r.FIXED_CONSTRAINT|=q?r.AXIS.ROLL:0}beginHUD(o,p,q){var r=this.cam;if(o=o||r.renderer,!!o){o.push();var u=o.drawingContext,p=void 0===p?o.width:p,q=void 0===q?o.height:q,v=Number.MAX_VALUE;u.flush(),u.disable(u.DEPTH_TEST),this.pushed_uMVMatrix=o.uMVMatrix.copy(),this.pushed_uPMatrix=o.uPMatrix.copy(),o.resetMatrix(),o.ortho(0,p,-q,0,-v,+v)}}endHUD(o){var p=this.cam;if(o=o||p.renderer,!!o){var q=o.drawingContext;q.flush(),o.uMVMatrix.set(this.pushed_uMVMatrix),o.uPMatrix.set(this.pushed_uPMatrix),q.enable(q.DEPTH_TEST),o.pop()}}},g=class{constructor(o,p){this.cam=o,this.value=0,this.damping=0.85,this.action=p}addForce(o){this.value+=o}update(){var o=1e-6<this.value*this.value;return o?(this.action(this.value),this.value*=this.damping):this.stop(),o}stop(){this.value=0}},j=class{constructor(o,p){this.cam=o,this.action=p}start(o,p,q,r){for(var u in r)r[u].stop();this.valA=o,this.valB=p,this.duration=q===void 0?this.cam.default_interpolation_time:q,this.timer=new Date().getTime(),this.active=0<this.duration,this.active||this.interpolate(1)}update(){if(this.active){var o=(new Date().getTime()-this.timer)/this.duration;0.995<o?(this.interpolate(1),this.stop()):this.interpolate(o)}}interpolate(o){this.action(this.valA,this.valB,o)}stop(){this.active=!1}},k={assert:function(o){return o===void 0||o.constructor!==Array?[1,0,0,0]:o},identity:function(){return[1,0,0,0]},applyToVec3:function(o,p,q){var r=p[0],u=p[1],v=p[2],A=o[0],B=o[1],C=o[2],D=o[3],E=B*r+C*u+D*v;return q=m.assert(q),q[0]=2*(A*(r*A-(C*v-D*u))+E*B)-r,q[1]=2*(A*(u*A-(D*r-B*v))+E*C)-u,q[2]=2*(A*(v*A-(B*u-C*r))+E*D)-v,q},applyToRotation(o,p,q){var r=o[0],u=o[1],v=o[2],A=o[3],B=p[0],C=p[1],D=p[2],E=p[3];return q=k.assert(q),q[0]=B*r-(C*u+D*v+E*A),q[1]=C*r+B*u+(D*A-E*v),q[2]=D*r+B*v+(E*u-C*A),q[3]=E*r+B*A+(C*v-D*u),q},slerp:function(o,p,q,r){var u=o[0],v=o[1],A=o[2],B=o[3],C=p[0],D=p[1],E=p[2],F=p[3],G=u*C+v*D+A*E+B*F;0>G&&(C=-C,D=-D,E=-E,F=-F,G=-G);var J,K,H=Math.acos(G),I=Math.sqrt(1-G*G);return 1e-3<I?(J=Math.sin((1-q)*H)/I,K=Math.sin(q*H)/I):(J=1-q,K=q),r=k.assert(r),r[0]=J*u+K*C,r[1]=J*v+K*D,r[2]=J*A+K*E,r[3]=J*B+K*F,k.create({rotation:r,normalize:!0},r)},create:function(o,p){if(p=k.assert(p),o.axis){var q=o.axis,r=o.angle,u=m.mag(q);if(0==u)return;var v=-0.5*r,A=Math.sin(v)/u;return p[0]=Math.cos(v),p[1]=A*q[0],p[2]=A*q[1],p[3]=A*q[2],p}if(o.rotation){if(p[0]=o.rotation[0],p[1]=o.rotation[1],p[2]=o.rotation[2],p[3]=o.rotation[3],o.normalize){var B=1/Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2]+p[3]*p[3]);p[0]*=B,p[1]*=B,p[2]*=B,p[3]*=B}return p}if(o.angles_xyz){var C=-0.5*o.angles_xyz[0],D=-0.5*o.angles_xyz[1],E=-0.5*o.angles_xyz[2],F=[Math.cos(C),Math.sin(C),0,0],G=[Math.cos(D),0,Math.sin(D),0],H=[Math.cos(E),0,0,Math.sin(E)];return k.applyToRotation(G,H,p),k.applyToRotation(F,p,p),p}}},l={mix:function(o,p,q){return o*(1-q)+p*q},smoothstep:function(o){return o*o*(3-2*o)},smootherstep:function(){return x*x*x*(x*(6*x-15)+10)}},m={assert:function(o){return o===void 0||o.constructor!==Array?[0,0,0]:o},isScalar:function(o){return o!==void 0&&o.constructor!==Array},add:function(o,p,q){return q=this.assert(q),this.isScalar(p)?(q[0]=o[0]+p,q[1]=o[1]+p,q[2]=o[2]+p):(q[0]=o[0]+p[0],q[1]=o[1]+p[1],q[2]=o[2]+p[2]),q},mult:function(o,p,q){return q=this.assert(q),this.isScalar(p)?(q[0]=o[0]*p,q[1]=o[1]*p,q[2]=o[2]*p):(q[0]=o[0]*p[0],q[1]=o[1]*p[1],q[2]=o[2]*p[2]),q},magSq:function(o){return o[0]*o[0]+o[1]*o[1]+o[2]*o[2]},mag:function(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2])},dot:function(o,p){return o[0]*p[0]+o[1]*p[1]+o[2]*p[2]},cross:function(o,p,q){return q=this.assert(q),q[0]=o[1]*p[2]-o[2]*p[1],q[1]=o[2]*p[0]-o[0]*p[2],q[2]=o[0]*p[1]-o[1]*p[0],q},angle:function(o,p){var q=this.mag(o)*this.mag(p);if(0==q)return 0;var r=this.dot(o,p),u=0.9999*q;if(r<-u||r>u){var v=this.cross(o,p);return 0<=r?Math.asin(this.mag(v)/q):Math.PI-Math.asin(this.mag(v)/q)}return Math.acos(r/q)},mix(o,p,q,r){return r=this.assert(r),r[0]=l.mix(o[0],p[0],q),r[1]=l.mix(o[1],p[1],q),r[2]=l.mix(o[2],p[2],q),r}};f.INFO=e,Object.freeze(e),c.EasyCam=f,c.DampedAction=g,c.Interpolation=j,c.Rotation=k,c.Vec3=m,c.Scalar=l,p5&&(!p5.prototype.hasOwnProperty("glInfo")&&(p5.prototype.glInfo=function(){return this._renderer.glInfo.apply(this._renderer,arguments)},p5.RendererGL.prototype.glInfo=function(){var o=this.drawingContext,p={};p.gl=this.drawingContext;var q=o.getExtension("WEBGL_debug_renderer_info");return q&&(p.gpu_renderer=o.getParameter(q.UNMASKED_RENDERER_WEBGL),p.gpu_vendor=o.getParameter(q.UNMASKED_VENDOR_WEBGL)),p.wgl_renderer=o.getParameter(o.RENDERER),p.wgl_version=o.getParameter(o.VERSION),p.wgl_glsl=o.getParameter(o.SHADING_LANGUAGE_VERSION),p.wgl_vendor=o.getParameter(o.VENDOR),p}),!p5.prototype.hasOwnProperty("createEasyCam")&&(p5.prototype.createEasyCam=function(){var o=this._renderer,p=arguments[0];return arguments[0]instanceof p5.RendererGL&&(o=arguments[0],p=arguments[1]),new c.EasyCam(o,p)}),p5.prototype.ortho=function(){return this._renderer.ortho.apply(this._renderer,arguments),this},p5.RendererGL.prototype.ortho=function(o,p,q,r,u,v){o===void 0&&(o=-this.width/2),p===void 0&&(p=+this.width/2),q===void 0&&(q=-this.height/2),r===void 0&&(r=+this.height/2),u===void 0&&(u=0),v===void 0&&(v=Math.max(this.width,this.height));var A=p-o,B=r-q,C=v-u,G=-(p+o)/A,H=-(r+q)/B,I=-(v+u)/C;this.uPMatrix=p5.Matrix.identity(),this.uPMatrix.set(2/A,0,0,0,0,-(2/B),0,0,0,0,-2/C,0,G,H,I,1),this._curCamera="custom"})})(Dw);